<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradeLog Pro ‚Äî Trading Journal</title>
    <meta name="description" content="Track your trades, analyze performance, find your edge.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/app.css">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìä</text></svg>">
</head>
<body>
    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-container">
            <a href="../index.html" class="nav-logo">
                <span class="logo-icon">üìä</span>
                <span class="logo-text">TradeLog<span class="logo-accent">Pro</span></span>
            </a>
            <div class="nav-links">
                <a href="../index.html">Home</a>
                <a href="../index.html#calculator">Calculator</a>
                <span class="text-muted text-sm" id="tradeCount">0 trades logged</span>
                <button class="btn btn-sm btn-outline" id="exportBtn">üì§ Export</button>
                <button class="btn btn-sm btn-outline" id="importBtn">üì• Import</button>
            </div>
            <button class="nav-mobile-toggle" id="mobileToggle" aria-label="Menu">
                <span></span><span></span><span></span>
            </button>
        </div>
    </nav>

    <div class="app-layout">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <nav class="sidebar-nav">
                <button class="sidebar-item active" data-page="dashboard">
                    <span class="icon">üìä</span> Dashboard
                </button>
                <button class="sidebar-item" data-page="trades">
                    <span class="icon">üìù</span> Trade Log
                </button>
                <button class="sidebar-item" data-page="analytics">
                    <span class="icon">üìà</span> Analytics
                </button>
                <button class="sidebar-item" data-page="calculator">
                    <span class="icon">üßÆ</span> Calculator
                </button>
                <div class="sidebar-divider"></div>
                <span class="sidebar-section-label">Settings</span>
                <button class="sidebar-item" data-page="accounts">
                    <span class="icon">üí∞</span> Accounts
                </button>
                <button class="sidebar-item" data-page="settings">
                    <span class="icon">‚öôÔ∏è</span> Settings
                </button>
                <div class="sidebar-divider"></div>
                <div style="padding: 0 16px;">
                    <a href="../index.html#pricing" class="btn btn-primary btn-sm btn-block" id="upgradeBtn">
                        ‚ö° Upgrade to Pro
                    </a>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="app-main" id="appMain">
            <!-- Dashboard Page -->
            <div class="page" id="page-dashboard">
                <div class="page-header">
                    <h1>üìä Dashboard</h1>
                    <div class="page-header-actions">
                        <div class="filter-group">
                            <label>Period:</label>
                            <select id="dashPeriod">
                                <option value="7">Last 7 days</option>
                                <option value="30" selected>Last 30 days</option>
                                <option value="90">Last 90 days</option>
                                <option value="365">Last year</option>
                                <option value="0">All time</option>
                            </select>
                        </div>
                        <button class="btn btn-primary" id="addTradeBtn">+ New Trade</button>
                    </div>
                </div>

                <!-- Stats -->
                <div class="stats-row" id="dashStats">
                    <div class="stat-card">
                        <div class="stat-label">Total P&L</div>
                        <div class="stat-value" id="statPL">$0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Win Rate</div>
                        <div class="stat-value" id="statWinRate">‚Äî</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Total Trades</div>
                        <div class="stat-value" id="statTrades">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Avg Winner</div>
                        <div class="stat-value" id="statAvgWin">‚Äî</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Avg Loser</div>
                        <div class="stat-value" id="statAvgLoss">‚Äî</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Profit Factor</div>
                        <div class="stat-value" id="statPF">‚Äî</div>
                    </div>
                </div>

                <!-- Charts -->
                <div class="two-col">
                    <div class="chart-container">
                        <h3>üìà Equity Curve</h3>
                        <canvas id="equityChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>üìÖ Daily P&L</h3>
                        <canvas id="dailyPLChart"></canvas>
                    </div>
                </div>

                <!-- Calendar Heatmap -->
                <div class="chart-container">
                    <h3>üóìÔ∏è Trading Calendar <span class="pro-badge" style="margin-left:8px;">PRO</span></h3>
                    <div id="calendarHeatmap" class="calendar-grid"></div>
                </div>

                <!-- Recent Trades -->
                <div class="trades-panel">
                    <div class="panel-header">
                        <h2>Recent Trades</h2>
                        <button class="btn btn-sm btn-ghost" data-page="trades">View All ‚Üí</button>
                    </div>
                    <div class="trades-table-wrapper">
                        <table class="trades-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Ticker</th>
                                    <th>Type</th>
                                    <th>Side</th>
                                    <th>Entry</th>
                                    <th>Exit</th>
                                    <th>Qty</th>
                                    <th>P&L</th>
                                    <th>Strategy</th>
                                </tr>
                            </thead>
                            <tbody id="recentTradesBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Trade Log Page -->
            <div class="page" id="page-trades" style="display:none;">
                <div class="page-header">
                    <h1>üìù Trade Log</h1>
                    <div class="page-header-actions">
                        <input type="text" placeholder="Search ticker..." id="tradeSearch" style="width:160px;">
                        <select id="tradeFilterType" style="width:120px;">
                            <option value="">All Types</option>
                            <option value="stock">Stock</option>
                            <option value="option_call">Call Option</option>
                            <option value="option_put">Put Option</option>
                            <option value="futures">Futures</option>
                            <option value="crypto">Crypto</option>
                        </select>
                        <button class="btn btn-primary" id="addTradeBtn2">+ New Trade</button>
                    </div>
                </div>

                <div class="trades-panel">
                    <div class="trades-table-wrapper">
                        <table class="trades-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Ticker</th>
                                    <th>Type</th>
                                    <th>Side</th>
                                    <th>Entry</th>
                                    <th>Exit</th>
                                    <th>Qty</th>
                                    <th>P&L</th>
                                    <th>Strategy</th>
                                    <th>Notes</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="allTradesBody"></tbody>
                        </table>
                    </div>
                    <div class="empty-state" id="emptyState" style="display:none;">
                        <div class="empty-icon">üìù</div>
                        <p>No trades logged yet. Start tracking your trades!</p>
                        <button class="btn btn-primary" id="addTradeBtn3">+ Log Your First Trade</button>
                    </div>
                </div>
            </div>

            <!-- Analytics Page -->
            <div class="page" id="page-analytics" style="display:none;">
                <div class="page-header">
                    <h1>üìà Analytics</h1>
                    <div class="page-header-actions">
                        <select id="analyticsPeriod">
                            <option value="30">Last 30 days</option>
                            <option value="90" selected>Last 90 days</option>
                            <option value="365">Last year</option>
                            <option value="0">All time</option>
                        </select>
                    </div>
                </div>

                <div class="two-col">
                    <div class="chart-container">
                        <h3>üìä P&L by Ticker</h3>
                        <canvas id="plByTickerChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>üéØ Win Rate by Strategy</h3>
                        <canvas id="winRateByStratChart"></canvas>
                    </div>
                </div>
                <div class="two-col">
                    <div class="chart-container">
                        <h3>‚è∞ P&L by Day of Week</h3>
                        <canvas id="plByDayChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>üìè Trade Duration Distribution</h3>
                        <canvas id="durationChart"></canvas>
                    </div>
                </div>
                <div class="chart-container">
                    <h3>üìä Cumulative P&L Over Time</h3>
                    <canvas id="cumulativePLChart"></canvas>
                </div>
            </div>

            <!-- Calculator Page -->
            <div class="page" id="page-calculator" style="display:none;">
                <div class="page-header">
                    <h1>üßÆ Options Calculator</h1>
                </div>
                <div class="calc-wrapper" style="border-radius: var(--radius-xl); overflow: hidden;">
                    <div class="calc-inputs">
                        <h3>üìê Strategy Builder</h3>
                        <div class="calc-form">
                            <div class="form-group">
                                <label>Strategy</label>
                                <select id="appCalcStrategy">
                                    <option value="long_call">Long Call</option>
                                    <option value="long_put">Long Put</option>
                                    <option value="covered_call">Covered Call</option>
                                    <option value="bull_call_spread">Bull Call Spread</option>
                                    <option value="bear_put_spread">Bear Put Spread</option>
                                    <option value="iron_condor">Iron Condor</option>
                                    <option value="straddle">Long Straddle</option>
                                    <option value="strangle">Long Strangle</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Current Stock Price</label>
                                <input type="number" id="appCalcStockPrice" value="150" step="0.01">
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Strike Price</label>
                                    <input type="number" id="appCalcStrike" value="155" step="0.01">
                                </div>
                                <div class="form-group">
                                    <label>Premium</label>
                                    <input type="number" id="appCalcPremium" value="3.50" step="0.01">
                                </div>
                            </div>
                            <div class="form-row" id="appSpreadInputs" style="display:none;">
                                <div class="form-group">
                                    <label>Strike 2</label>
                                    <input type="number" id="appCalcStrike2" value="160" step="0.01">
                                </div>
                                <div class="form-group">
                                    <label>Premium 2</label>
                                    <input type="number" id="appCalcPremium2" value="1.50" step="0.01">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Contracts</label>
                                    <input type="number" id="appCalcContracts" value="1" step="1" min="1">
                                </div>
                                <div class="form-group">
                                    <label>Days to Expiry</label>
                                    <input type="number" id="appCalcDTE" value="30" step="1" min="1">
                                </div>
                            </div>
                            <button class="btn btn-primary btn-block" id="appCalcBtn">Calculate ‚Üí</button>
                        </div>
                    </div>
                    <div class="calc-results">
                        <h3>üìä Profit & Loss Analysis</h3>
                        <div class="calc-stats">
                            <div class="calc-stat">
                                <span class="calc-stat-label">Max Profit</span>
                                <span class="calc-stat-value green" id="appMaxProfit">‚Äî</span>
                            </div>
                            <div class="calc-stat">
                                <span class="calc-stat-label">Max Loss</span>
                                <span class="calc-stat-value red" id="appMaxLoss">‚Äî</span>
                            </div>
                            <div class="calc-stat">
                                <span class="calc-stat-label">Breakeven</span>
                                <span class="calc-stat-value" id="appBreakeven">‚Äî</span>
                            </div>
                            <div class="calc-stat">
                                <span class="calc-stat-label">Risk/Reward</span>
                                <span class="calc-stat-value" id="appRiskReward">‚Äî</span>
                            </div>
                        </div>
                        <div class="calc-chart-container">
                            <canvas id="appPLChart" width="500" height="280"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Accounts Page -->
            <div class="page" id="page-accounts" style="display:none;">
                <div class="page-header">
                    <h1>üí∞ Accounts</h1>
                    <div class="page-header-actions">
                        <button class="btn btn-primary" id="addAccountBtn">+ Add Account</button>
                    </div>
                </div>
                <div class="stats-row" id="accountsList"></div>
                <div class="empty-state" id="accountsEmpty">
                    <div class="empty-icon">üí∞</div>
                    <p>Set up your trading accounts to track performance separately.</p>
                    <button class="btn btn-primary" id="addAccountBtn2">+ Add Account</button>
                </div>
            </div>

            <!-- Settings Page -->
            <div class="page" id="page-settings" style="display:none;">
                <div class="page-header">
                    <h1>‚öôÔ∏è Settings</h1>
                </div>
                <div class="chart-container">
                    <h3>Data Management</h3>
                    <div style="display:flex; gap:12px; flex-wrap:wrap; margin-top:16px;">
                        <button class="btn btn-outline" id="settingsExport">üì§ Export All Data (JSON)</button>
                        <button class="btn btn-outline" id="settingsExportCSV">üì§ Export Trades (CSV)</button>
                        <button class="btn btn-outline" id="settingsImport">üì• Import Data</button>
                        <button class="btn btn-danger" id="settingsClear">üóëÔ∏è Clear All Data</button>
                    </div>
                    <input type="file" id="importFileInput" accept=".json,.csv" style="display:none;">
                </div>
                <div class="chart-container">
                    <h3>About</h3>
                    <p class="text-secondary" style="margin-top:8px;">
                        <strong>TradeLog Pro v1.0.0</strong><br>
                        All data is stored locally in your browser using localStorage.<br>
                        No data is ever sent to any server. Your trades stay private.<br><br>
                        Built with ‚ù§Ô∏è for traders, by traders.
                    </p>
                </div>
            </div>
        </main>
    </div>

    <!-- Add/Edit Trade Modal -->
    <div class="modal-overlay" id="tradeModal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="modalTitle">Log Trade</h2>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-row">
                    <div class="form-group">
                        <label>Date</label>
                        <input type="date" id="tradeDate">
                    </div>
                    <div class="form-group">
                        <label>Ticker</label>
                        <input type="text" id="tradeTicker" placeholder="AAPL" style="text-transform:uppercase;">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Type</label>
                        <select id="tradeType">
                            <option value="stock">Stock</option>
                            <option value="option_call">Call Option</option>
                            <option value="option_put">Put Option</option>
                            <option value="futures">Futures</option>
                            <option value="crypto">Crypto</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Side</label>
                        <select id="tradeSide">
                            <option value="long">Long</option>
                            <option value="short">Short</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Entry Price</label>
                        <input type="number" id="tradeEntry" step="0.01" min="0" placeholder="0.00">
                    </div>
                    <div class="form-group">
                        <label>Exit Price</label>
                        <input type="number" id="tradeExit" step="0.01" min="0" placeholder="0.00">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Quantity</label>
                        <input type="number" id="tradeQty" step="1" min="1" value="100" placeholder="100">
                    </div>
                    <div class="form-group">
                        <label>Commission</label>
                        <input type="number" id="tradeComm" step="0.01" min="0" value="0" placeholder="0.00">
                    </div>
                </div>
                <div class="form-group">
                    <label>Strategy / Setup</label>
                    <select id="tradeStrategy">
                        <option value="">‚Äî None ‚Äî</option>
                        <option value="breakout">Breakout</option>
                        <option value="pullback">Pullback</option>
                        <option value="reversal">Reversal</option>
                        <option value="momentum">Momentum</option>
                        <option value="scalp">Scalp</option>
                        <option value="swing">Swing</option>
                        <option value="gap_fill">Gap Fill</option>
                        <option value="earnings">Earnings Play</option>
                        <option value="theta_decay">Theta Decay</option>
                        <option value="iron_condor">Iron Condor</option>
                        <option value="vertical_spread">Vertical Spread</option>
                        <option value="wheel">The Wheel</option>
                        <option value="covered_call">Covered Call</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Emotion</label>
                        <select id="tradeEmotion">
                            <option value="">‚Äî None ‚Äî</option>
                            <option value="calm">üòå Calm</option>
                            <option value="confident">üòé Confident</option>
                            <option value="fomo">üò∞ FOMO</option>
                            <option value="fear">üò® Fear</option>
                            <option value="greed">ü§ë Greed</option>
                            <option value="revenge">üò§ Revenge</option>
                            <option value="bored">üòë Bored</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Account</label>
                        <select id="tradeAccount">
                            <option value="default">Default</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Notes</label>
                    <textarea id="tradeNotes" placeholder="What was your thesis? What went right/wrong?"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="modalCancel">Cancel</button>
                <button class="btn btn-primary" id="modalSave">Save Trade</button>
            </div>
        </div>
    </div>

    <!-- Account Modal -->
    <div class="modal-overlay" id="accountModal">
        <div class="modal">
            <div class="modal-header">
                <h2>Add Account</h2>
                <button class="modal-close" id="accountModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Account Name</label>
                    <input type="text" id="accountName" placeholder="e.g., TD Ameritrade, Robinhood">
                </div>
                <div class="form-group">
                    <label>Starting Balance</label>
                    <input type="number" id="accountBalance" step="0.01" value="10000" placeholder="10000">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="accountModalCancel">Cancel</button>
                <button class="btn btn-primary" id="accountModalSave">Save Account</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="../js/store.js"></script>
    <script src="../js/charts.js"></script>
    <script src="../js/app.js"></script>
    <script src="../js/app-calculator.js"></script>
</body>
</html>
